(()=>{"use strict";const e=window.wp.element,t=window.wp.components,s=window.wp.blocks,r=window.ReactJSXRuntime,c=({attributes:s,setAttributes:c})=>{const{symbol:o="BTCUSDT"}=s,[a,i]=(0,e.useState)("Loading..."),[n,l]=(0,e.useState)([]),[p,y]=(0,e.useState)(!0);return(0,e.useEffect)(()=>{(async()=>{try{const e=await fetch("/wp-json/crypto/v1/symbols"),t=await e.json();if(!Array.isArray(t))throw new Error("Response not an array");const s=t.filter(e=>e.symbol.endsWith("USDT")).map(e=>({label:e.symbol.replace("USDT",""),value:e.symbol}));l(s)}catch(e){console.error("Error fetching symbol list",e)}finally{y(!1)}})()},[]),(0,e.useEffect)(()=>{(async()=>{try{const e=await fetch(`/wp-json/crypto/v1/price?symbol=${o}`),t=await e.json();i(t.price||"N/A")}catch{i("Error fetching price")}})()},[o]),(0,r.jsxs)("div",{className:"cryptoPriceTracker",children:[p?(0,r.jsx)(t.Spinner,{}):(0,r.jsx)(t.SelectControl,{label:"Select Cryptocurrency",value:o,options:n,onChange:e=>c({symbol:e}),className:"cryptoPriceTracker-select",__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,r.jsxs)("div",{className:"cryptoPriceTracker-price",children:[(0,r.jsxs)("strong",{children:[o.replace("USDT","")," Price:"]})," $",a]})]})};(0,s.registerBlockType)("aleksei/crypto-price",{attributes:{symbol:{type:"string",default:"BTCUSDT"}},edit:e=>(0,r.jsx)(c,{...e}),save:({attributes:e})=>(0,r.jsx)("div",{className:"wp-block-aleksei-crypto-price","data-symbol":e.symbol,children:(0,r.jsx)("span",{class:"crypto-loading",children:"Loading price..."})})})})();